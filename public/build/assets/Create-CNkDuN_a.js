import{_ as I}from"./AuthenticatedLayout-BlAmliJP.js";import{Z as T,j as U,T as B,k as i,f as d,a as n,w as c,F as v,o as u,b as e,d as p,e as L,n as f,l as E,t as j,g as _}from"./app-ctv0rznj.js";import{_ as q}from"./LinkButton-CgjH23nr.js";import{P as D}from"./PrimaryButton-Bpy3ozRt.js";import{a as N,b as P,_ as A}from"./TextInput-C4PvDNml.js";import{_ as H}from"./SelectInput-DRrKjI14.js";import{_ as O}from"./Checkbox-Dka3b9Kh.js";import{D as R}from"./DangerButton-CmYcJXZx.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BsOgWnat.js";const M={components:{AuthenticatedLayout:I,Head:T,LinkButton:q,PrimaryButton:D,TextInput:N,InputError:P,InputLabel:A,SelectInput:H,Checkbox:O,DangerButton:R},props:{errors:Object},data(){const l=U([]);return{form:B({title:null,schema:[]}),selections:l}},watch:{selections:{handler(l){this.form.schema=l},deep:!0}},methods:{addSelection(){const l={id:`field_${this.selections.length+1}`,label:`Field ${this.selections.length+1}`,title:null,type:"text",placeholder:"Question",options:null,file_type:null,is_required:!1};this.selections.push(l),this.form.clearErrors("schema")},removeSelection(l){this.selections.splice(l,1)},changeSelectionType(l){const t=this.selections[l];t.type!=="select"&&(t.options=null)},moveField(l,t){const h=t==="up"?l-1:l+1;if(h<0||h>=this.selections.length)return;const g=this.selections[l];this.selections[l]=this.selections[h],this.selections[h]=g},submit(){this.form.post(route("admin.form.store"),{onSuccess:()=>{toastr.success("Form successfully saved"),this.resetForm()},onError:l=>{toastr.error("Something went wrong")}})},resetForm(){this.form.reset(),this.form.clearErrors(),this.selections=[]}}},Q={class:"py-12"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"grid gap-5"},W={class:"grid grid-cols-3 gap-x-4"},X={class:"col-span-2"},Y={key:0},$={key:1},ee={class:"flex justify-between items-center"},te={class:"inline-flex items-center cursor-pointer space-x-3 text-sm"},se=["onClick"],oe=["onClick"],le={key:0,class:"bg-red-100 rounded-md p-4 border border-red-200 text-red-700 text-md"};function re(l,t,h,g,o,m){const k=i("Head"),V=i("InputLabel"),b=i("TextInput"),y=i("InputError"),w=i("SelectInput"),C=i("Checkbox"),F=i("DangerButton"),x=i("PrimaryButton"),S=i("AuthenticatedLayout");return u(),d(v,null,[n(k,{title:"Forms | Create Form"}),n(S,null,{header:c(()=>t[2]||(t[2]=[e("div",{class:"flex items-center"},[p(" Forms "),e("span",{class:"material-symbols-outlined text-gray-400"}," keyboard_arrow_right "),p(" Create Form ")],-1)])),default:c(()=>[e("div",Q,[e("div",Z,[e("div",G,[e("div",J,[e("div",null,[e("form",{onSubmit:t[1]||(t[1]=L((...s)=>m.submit&&m.submit(...s),["prevent"]))},[e("div",K,[e("div",null,[n(V,{for:"title",value:"Title",required:!0}),n(b,{id:"title",type:"text",class:f(["w-full",{"border-red-600":o.form.errors.title}]),modelValue:o.form.title,"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.title=s),placeholder:"Title",autocomplete:"title"},null,8,["modelValue","class"]),n(y,{message:o.form.errors.title},null,8,["message"])]),(u(!0),d(v,null,E(o.selections,(s,r)=>(u(),d("div",{class:"border border-gray-400 p-6 rounded-lg shadow-sm space-y-4",key:r},[e("div",W,[e("div",X,[n(b,{id:s.id,type:"text",class:f(["w-full",{"border-red-600":o.form.errors[`schema.${r}.title`]}]),modelValue:s.title,"onUpdate:modelValue":a=>s.title=a,placeholder:s.placeholder},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),n(y,{message:o.form.errors[`schema.${r}.title`]},null,8,["message"])]),e("div",null,[n(w,{onChange:a=>m.changeSelectionType(r),id:"input_type_"+r,modelValue:s.type,"onUpdate:modelValue":a=>s.type=a,class:"w-full"},{default:c(()=>t[3]||(t[3]=[e("option",{value:"text",selected:""},"Text",-1),e("option",{value:"textarea"},"Textarea",-1),e("option",{value:"select"},"Select",-1),e("option",{value:"checkbox"},"Checkbox",-1),e("option",{value:"radio"},"Radio",-1),e("option",{value:"number"},"Number",-1),e("option",{value:"file"},"File",-1)])),_:2},1032,["onChange","id","modelValue","onUpdate:modelValue"])])]),e("div",null,[["select","radio","checkbox"].includes(s.type)?(u(),d("div",Y,[n(b,{id:s.id,type:"text",class:f(["w-full",{"border-red-600":o.form.errors[`schema.${r}.options`]}]),modelValue:s.options,"onUpdate:modelValue":a=>s.options=a,placeholder:"Options (comma-separated)"},null,8,["id","modelValue","onUpdate:modelValue","class"]),n(y,{message:o.form.errors[`schema.${r}.options`]},null,8,["message"])])):_("",!0),["file"].includes(s.type)?(u(),d("div",$,[n(b,{id:s.id,type:"text",class:f(["w-full",{"border-red-600":o.form.errors[`schema.${r}.file_type`]}]),modelValue:s.file_type,"onUpdate:modelValue":a=>s.file_type=a,placeholder:"File type (comma-separated)"},null,8,["id","modelValue","onUpdate:modelValue","class"]),t[4]||(t[4]=e("p",null,"Files",-1)),n(y,{message:o.form.errors[`schema.${r}.file_type`]},null,8,["message"])])):_("",!0)]),e("div",ee,[e("div",null,[e("label",te,[t[5]||(t[5]=p(" Required ")),n(C,{checked:s.is_required,"onUpdate:checked":a=>s.is_required=a,class:"sr-only peer"},null,8,["checked","onUpdate:checked"]),t[6]||(t[6]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-700 peer-disabled:cursor-not-allowed"},null,-1))])]),e("div",{class:f(["flex flex-col items-center",{"gap-y-2.5":r!==0&&r!==o.selections.length-1}])},[e("div",null,[r!==0?(u(),d("button",{key:0,onClick:a=>m.moveField(r,"up"),type:"button",class:"w-11 h-8 flex items-center justify-center border border-transparent bg-gray-100 rounded-sm shadow-sm p-1 disabled:opacity-25 disabled:cursor-not-allowed"},t[7]||(t[7]=[e("span",{class:"material-symbols-outlined text-2xl font-bold text-gray-800"}," keyboard_arrow_up ",-1)]),8,se)):_("",!0)]),e("div",null,[r!==o.selections.length-1?(u(),d("button",{key:0,onClick:a=>m.moveField(r,"down"),type:"button",class:"w-11 h-8 flex items-center justify-center border border-transparent bg-gray-100 rounded-sm shadow-sm p-1 disabled:opacity-25 disabled:cursor-not-allowed"},t[8]||(t[8]=[e("span",{class:"material-symbols-outlined text-2xl font-bold text-gray-800"}," keyboard_arrow_down ",-1)]),8,oe)):_("",!0)])],2),e("div",null,[n(F,{type:"button",onClick:a=>m.removeSelection(r),class:"h-8 w-9 flex items-center justify-center"},{default:c(()=>t[9]||(t[9]=[e("span",{class:"material-symbols-outlined"}," delete ",-1)])),_:2},1032,["onClick"])])])]))),128)),o.form.errors.schema?(u(),d("div",le,[t[10]||(t[10]=e("span",{class:"font-bold"},"Oops!",-1)),p(" "+j(o.form.errors.schema),1)])):_("",!0),e("div",null,[n(x,{onClick:m.addSelection,type:"button"},{default:c(()=>t[11]||(t[11]=[e("span",{class:"material-symbols-outlined mr-2"}," add ",-1),p(" add question ")])),_:1},8,["onClick"])]),e("div",null,[n(x,{type:"submit",disabled:o.form.processing,class:f({"opacity-25":o.form.processing})},{default:c(()=>t[12]||(t[12]=[p("save ")])),_:1},8,["disabled","class"])])])],32)])])])])])]),_:1})],64)}const _e=z(M,[["render",re]]);export{_e as default};
