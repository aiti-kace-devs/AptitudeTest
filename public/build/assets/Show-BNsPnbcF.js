import{_ as y}from"./AuthenticatedLayout-BlAmliJP.js";import{Z as x,N as l,k as s,f as _,a,w as n,F as b,o as D,b as o,d as i}from"./app-ctv0rznj.js";import{_ as v}from"./LinkButton-CgjH23nr.js";import{M}from"./MenuDropdown-Co-I7j6P.js";import{D as k}from"./DangerButton-CmYcJXZx.js";import{_ as C}from"./Modal-BR_I9X5c.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BsOgWnat.js";const T={components:{AuthenticatedLayout:y,Head:x,LinkButton:v,MenuDropdown:M,DangerButton:k,Modal:C},props:{form:Object},data(){return{destroyModal:!1,selectedRow:null}},mounted(){this.fetch(),$(document).on("click",".dropdown-toggle",t=>{const e=$(t.target).attr("dropdown-log");this.$refs.menuDropdown&&t.target.classList.contains("dropdown-span")&&this.$refs.menuDropdown.toggleDropdown(e)}),$(document).on("click","body",t=>{this.$refs.menuDropdown&&!t.target.classList.contains("dropdown-span")&&this.$refs.menuDropdown.closeAllDropdowns()}),$(document).on("click",".edit",t=>{const e=$(t.currentTarget).data("id");l.get(route("admin.form_responses.edit",e))}),$(document).on("click",".view",t=>{const e=$(t.currentTarget).data("id");l.get(route("admin.form_responses.show",e))}),$(document).on("click",".responses",t=>{const e=$(t.currentTarget).data("id");l.get(route("admin.form.show",e))}),$(document).on("click",".delete",t=>{const e=$(t.currentTarget).data("id");this.showDestroyModal(e)})},methods:{fetch(){$("#data_table").DataTable({destroy:!0,stateSave:!1,processing:!1,serverSide:!0,ajax:{url:route("admin.form_responses.fetch"),data:{uuid:this.form.uuid}},columns:[{data:"title",name:"title"},{data:"date",name:"date"},{data:"action",name:"action",orderable:!1,searchable:!1}],lengthMenu:[[10,25,50,100,-1],["10","25","50","100","All"]],order:[[1,"desc"]],columnDefs:[{width:"5%",targets:-1}],createdRow:function(t,e,c){var d=$(t).find(".dropdown-menu");d.length>0&&d.width(160)}})},showDestroyModal(t){this.selectedRow=t,this.destroyModal=!0},hideDestroyModal(){this.destroyModal=!1,this.selectedRow=null},destroy(){axios.post(route("admin.form_responses.destroy",{response:this.selectedRow})).then(t=>[this.hideDestroyModal(),toastr.success("Response successfully deleted"),this.fetch()]).catch(t=>console.log(t))}}},B={class:"flex justify-center mt-6 gap-4"};function A(t,e,c,d,u,r){const m=s("Head"),p=s("MenuDropdown"),f=s("DangerButton"),g=s("Modal"),h=s("AuthenticatedLayout");return D(),_(b,null,[a(m,{title:"Forms | Responses"}),a(h,null,{header:n(()=>e[1]||(e[1]=[o("div",{class:"flex items-center"},[i(" Forms "),o("span",{class:"material-symbols-outlined text-gray-400"}," keyboard_arrow_right "),i(" Form Responses ")],-1)])),default:n(()=>[a(p,{ref:"menuDropdown"},null,512),e[4]||(e[4]=o("div",{class:"py-12"},[o("div",{class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},[o("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[o("div",{class:"p-6"},[o("div",{class:"flex flex-col mt-4"},[o("div",{class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},[o("div",{class:"py-2 inline-w-full sm:px-6 lg:px-8"},[o("div",{class:"overflow-x-auto"},[o("table",{id:"data_table",class:"w-full text-sm table-striped"},[o("thead",{class:"capitalize border-b bg-gray-100 font-medium"},[o("tr",null,[o("th",{scope:"col",class:"text-gray-900 px-6 py-4 text-left"}," Title "),o("th",{scope:"col",class:"text-gray-900 px-6 py-4 text-left"}," submitted at "),o("th",{scope:"col",class:"text-gray-900 px-6 py-4 text-left"}," action ")])])])])])])])])])])],-1)),a(g,{show:u.destroyModal,closeable:!0,modalTitle:"delete form response",onClose:r.hideDestroyModal,maxWidth:"md"},{default:n(()=>[e[3]||(e[3]=o("div",{class:"flex justify-center mt-4"},[o("p",{class:"text-lg"},"Are you sure you want to delete this response?")],-1)),o("div",B,[a(f,{onClick:r.destroy,type:"submit"},{default:n(()=>e[2]||(e[2]=[i(" Yes ")])),_:1},8,["onClick"]),o("button",{onClick:e[0]||(e[0]=(...w)=>r.hideDestroyModal&&r.hideDestroyModal(...w)),type:"button",class:"block items-center px-4 py-2 bg-gray-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:cursor-not-allowed"}," Cancel ")])]),_:1},8,["show","onClose"])]),_:1})],64)}const E=R(T,[["render",A]]);export{E as default};
