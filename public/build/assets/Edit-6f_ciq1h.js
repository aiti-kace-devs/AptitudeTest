import{_ as I}from"./AuthenticatedLayout-BlAmliJP.js";import{Z as B,j as E,T,k as a,f as c,a as n,w as m,F as v,o as u,b as e,d as p,e as U,n as h,l as q,t as L,g as b,c as j}from"./app-ctv0rznj.js";import{_ as D}from"./LinkButton-CgjH23nr.js";import{P as N}from"./PrimaryButton-Bpy3ozRt.js";import{a as O,b as P,_ as A}from"./TextInput-C4PvDNml.js";import{_ as H}from"./SelectInput-DRrKjI14.js";import{_ as Q}from"./Checkbox-Dka3b9Kh.js";import{D as R}from"./DangerButton-CmYcJXZx.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BsOgWnat.js";const M={components:{AuthenticatedLayout:I,Head:B,LinkButton:D,PrimaryButton:N,TextInput:O,InputError:P,InputLabel:A,SelectInput:H,Checkbox:Q,DangerButton:R},props:{errors:Object,admissionForm:Object},data(){const s=E([]);return{form:T({title:this.admissionForm.title,schema:this.admissionForm.schema}),selections:s}},mounted(){this.admissionForm.schema.forEach(s=>{const t={id:`field_${this.selections.length+1}`,label:`Field ${this.selections.length+1}`,title:s.title,type:s.type,placeholder:"Question",options:s.options,is_required:s.is_required};this.selections.push(t)})},watch:{selections:{handler(s){this.form.schema=s},deep:!0}},methods:{addSelection(){const s={id:`field_${Date.now()}`,label:`Field ${this.selections.length+1}`,title:null,type:"text",placeholder:"Question",options:null,is_required:!1};this.selections.push(s),this.form.clearErrors("schema")},removeSelection(s){this.selections.splice(s,1)},changeSelectionType(s){const t=this.selections[s];t.type!=="select"&&(t.options=null)},moveField(s,t){const f=t==="up"?s-1:s+1;if(f<0||f>=this.selections.length)return;const g=this.selections[s];this.selections[s]=this.selections[f],this.selections[f]=g},submit(){this.form.put(route("admin.form.update",{form:this.admissionForm.uuid}),{onSuccess:()=>{toastr.success("Form successfully updated"),this.resetForm()},onError:s=>{toastr.error("Something went wrong")}})},resetForm(){this.form.reset(),this.form.clearErrors(),this.selections=[]}}},Z={class:"py-12"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"grid gap-5"},W={class:"grid grid-cols-3 gap-x-4"},X={class:"col-span-2"},Y={class:"flex justify-between items-center"},ee={class:"inline-flex items-center cursor-pointer space-x-3 text-sm"},te=["onClick"],se=["onClick"],oe={key:0,class:"bg-red-100 rounded-md p-4 border border-red-200 text-red-700 text-md"};function le(s,t,f,g,l,d){const k=a("Head"),w=a("InputLabel"),_=a("TextInput"),y=a("InputError"),F=a("SelectInput"),V=a("Checkbox"),C=a("DangerButton"),x=a("PrimaryButton"),S=a("AuthenticatedLayout");return u(),c(v,null,[n(k,{title:"Forms | Edit Form"}),n(S,null,{header:m(()=>t[2]||(t[2]=[e("div",{class:"flex items-center"},[p(" Forms "),e("span",{class:"material-symbols-outlined text-gray-400"}," keyboard_arrow_right "),p(" Edit Form ")],-1)])),default:m(()=>[e("div",Z,[e("div",$,[e("div",G,[e("div",J,[e("div",null,[e("form",{onSubmit:t[1]||(t[1]=U((...o)=>d.submit&&d.submit(...o),["prevent"]))},[e("div",K,[e("div",null,[n(w,{for:"title",value:"Title",required:!0}),n(_,{id:"title",type:"text",class:h(["w-full",{"border-red-600":l.form.errors.title}]),modelValue:l.form.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.title=o),placeholder:"Title",autocomplete:"title"},null,8,["modelValue","class"]),n(y,{message:l.form.errors.title},null,8,["message"])]),(u(!0),c(v,null,q(l.selections,(o,r)=>(u(),c("div",{class:"border border-gray-400 p-6 rounded-lg shadow-sm space-y-4",key:r},[e("div",W,[e("div",X,[n(_,{id:o.id,type:"text",class:h(["w-full",{"border-red-600":l.form.errors[`schema.${r}.title`]}]),modelValue:o.title,"onUpdate:modelValue":i=>o.title=i,placeholder:o.placeholder},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),n(y,{message:l.form.errors[`schema.${r}.title`]},null,8,["message"])]),e("div",null,[n(F,{onChange:i=>d.changeSelectionType(r),id:"input_type_"+r,modelValue:o.type,"onUpdate:modelValue":i=>o.type=i,class:"w-full"},{default:m(()=>t[3]||(t[3]=[e("option",{value:"text",selected:""},"Text",-1),e("option",{value:"textarea"},"Textarea",-1),e("option",{value:"select"},"Select",-1),e("option",{value:"checkbox"},"Checkbox",-1),e("option",{value:"radio"},"Radio",-1),e("option",{value:"number"},"Number",-1)])),_:2},1032,["onChange","id","modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",null,[["select","radio","checkbox"].includes(o.type)?(u(),j(_,{key:0,id:o.id,type:"text",class:h(["w-full",{"border-red-600":l.form.errors[`schema.${r}.options`]}]),modelValue:o.options,"onUpdate:modelValue":i=>o.options=i,placeholder:"Options (comma-separated)"},null,8,["id","modelValue","onUpdate:modelValue","class"])):b("",!0),n(y,{message:l.form.errors[`schema.${r}.options`]},null,8,["message"])])]),e("div",Y,[e("div",null,[e("label",ee,[t[4]||(t[4]=p(" Required ")),n(V,{checked:o.is_required,"onUpdate:checked":i=>o.is_required=i,class:"sr-only peer"},null,8,["checked","onUpdate:checked"]),t[5]||(t[5]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-700 peer-disabled:cursor-not-allowed"},null,-1))])]),e("div",{class:h(["flex flex-col items-center",{"gap-y-2.5":r!==0&&r!==l.selections.length-1}])},[e("div",null,[r!==0?(u(),c("button",{key:0,onClick:i=>d.moveField(r,"up"),type:"button",class:"w-11 h-8 flex items-center justify-center border border-transparent bg-gray-100 rounded-sm shadow-sm p-1 disabled:opacity-25 disabled:cursor-not-allowed"},t[6]||(t[6]=[e("span",{class:"material-symbols-outlined text-2xl font-bold text-gray-800"}," keyboard_arrow_up ",-1)]),8,te)):b("",!0)]),e("div",null,[r!==l.selections.length-1?(u(),c("button",{key:0,onClick:i=>d.moveField(r,"down"),type:"button",class:"w-11 h-8 flex items-center justify-center border border-transparent bg-gray-100 rounded-sm shadow-sm p-1 disabled:opacity-25 disabled:cursor-not-allowed"},t[7]||(t[7]=[e("span",{class:"material-symbols-outlined text-2xl font-bold text-gray-800"}," keyboard_arrow_down ",-1)]),8,se)):b("",!0)])],2),e("div",null,[n(C,{type:"button",onClick:i=>d.removeSelection(r),class:"h-8 w-9 flex items-center justify-center"},{default:m(()=>t[8]||(t[8]=[e("span",{class:"material-symbols-outlined"}," delete ",-1)])),_:2},1032,["onClick"])])])]))),128)),l.form.errors.schema?(u(),c("div",oe,[t[9]||(t[9]=e("span",{class:"font-bold"},"Oops!",-1)),p(" "+L(l.form.errors.schema),1)])):b("",!0),e("div",null,[n(x,{onClick:d.addSelection,type:"button"},{default:m(()=>t[10]||(t[10]=[e("span",{class:"material-symbols-outlined mr-2"}," add ",-1),p(" add question ")])),_:1},8,["onClick"])]),e("div",null,[n(x,{type:"submit",disabled:l.form.processing,class:h({"opacity-25":l.form.processing})},{default:m(()=>t[11]||(t[11]=[p("update ")])),_:1},8,["disabled","class"])])])],32)])])])])])]),_:1})],64)}const he=z(M,[["render",le]]);export{he as default};
